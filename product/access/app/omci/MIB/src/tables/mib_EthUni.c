/*
 * Copyright (C) 2012 Realtek Semiconductor Corp. 
 * All Rights Reserved.
 *
 * This program is the proprietary software of Realtek Semiconductor
 * Corporation and/or its licensors, and only be used, duplicated, 
 * modified or distributed under the authorized license from Realtek. 
 *
 * ANY USE OF THE SOFTWARE OTHER THAN AS AUTHORIZED UNDER 
 * THIS LICENSE OR COPYRIGHT LAW IS PROHIBITED. 
 *
 */


#include "app_basic.h"
#include "omci_defs.h"

MIB_TABLE_INFO_T gMibEthUniTableInfo;
MIB_ATTR_INFO_T  gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ATTR_NUM];
MIB_TABLE_ETHUNI_T gMibEthUniDefRow;
MIB_TABLE_OPER_T gMibEthUniOper;

GOS_ERROR_CODE EthUniDumpMib(void *pData)
{
	MIB_TABLE_ETHUNI_T *pEthUni = (MIB_TABLE_ETHUNI_T*) pData;
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"%s","EthUni");	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"EntityID: 0x%02x",pEthUni->EntityID);		
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"AdminState: 0x%02x",pEthUni->AdminState);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"ARC: 0x%02x",pEthUni->ARC);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"ARCInterval: %d",pEthUni->ARCInterval);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"AutoDectectCfg: %d",pEthUni->AutoDectectCfg);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"BridgedorIPInd: %d",pEthUni->BridgedorIPInd);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"DTEorDCEInd: %d",pEthUni->DTEorDCEInd);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"DuplexInd: %d",pEthUni->DuplexInd);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"EthLoopbackCfg: %d",pEthUni->EthLoopbackCfg);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"ExpectedType: %d",pEthUni->ExpectedType);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"MaxFrameSize: %d",pEthUni->MaxFrameSize);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"OpState: %d",pEthUni->OpState);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"PauseTime: %d",pEthUni->PauseTime);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"PowerControl: %d",pEthUni->PowerControl);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"PppoeFilter: %d",pEthUni->PppoeFilter);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"SensedType: %d",pEthUni->SensedType);	
	return GOS_OK;
}


GOS_ERROR_CODE EthUniConnCheck(MIB_TREE_T *pTree,MIB_TREE_CONN_T *pConn,PON_ME_ENTITY_ID entity,int parm)
{
	MIB_ENTRY_T *pEntry;
	MIB_TABLE_ETHUNI_T *ethUni;
	
	OMCI_LOG(OMCI_LOG_LEVEL_LOW,"Start %s...",__FUNCTION__);
	pEntry = MIB_AvlTreeEntrySearch(pTree->root,AVL_KEY_PPTPUNI,entity);

	if(!pEntry)
		return GOS_FAIL;

	ethUni = (MIB_TABLE_ETHUNI_T*)pEntry->pData;
	pConn->pEthUni = ethUni;
	OMCI_MeOperConnCheck(MIB_TABLE_EXTVLANTAGOPERCFGDATA_INDEX,pTree,pConn,ethUni->EntityID,parm);		
	return GOS_OK;
}


GOS_ERROR_CODE EthUniAvlTreeAdd(MIB_TREE_T *pTree,UINT16 ethUniId)
{
	MIB_TABLE_ETHUNI_T *pEthUni;

	if(pTree==NULL) return GOS_FAIL;

	pEthUni = (MIB_TABLE_ETHUNI_T*)malloc(sizeof(MIB_TABLE_ETHUNI_T));

	if(!pEthUni)
	{
		OMCI_LOG(OMCI_LOG_LEVEL_LOW,"Malloc EthUni Fail");
		return GOS_FAIL;	
	}
	memset(pEthUni,0,sizeof(MIB_TABLE_ETHUNI_T));
	pEthUni->EntityID = ethUniId;
	if(MIB_Get(MIB_TABLE_ETHUNI_INDEX, pEthUni, sizeof(MIB_TABLE_ETHUNI_T))!=GOS_OK)
	{
		OMCI_LOG(OMCI_LOG_LEVEL_LOW,"Get EthUni Fail");
		return GOS_FAIL;	
	}

	if(MIB_AvlTreeNodeAdd(&pTree->root,AVL_KEY_PPTPUNI,MIB_TABLE_ETHUNI_INDEX,pEthUni)== NULL)
	{
		OMCI_LOG(OMCI_LOG_LEVEL_LOW,"Add GemPortCtp Node Fail");
		return GOS_FAIL;	
	}
	return GOS_OK;
}

GOS_ERROR_CODE EthUniDrvCfg(void* pOldRow,void* pNewRow,MIB_OPERA_TYPE  operationType)
{
	MIB_TABLE_ETHUNI_T*  	   	   ethUni;

	switch (operationType)
	{
		case MIB_ADD:
		{
			 OMCI_LOG(OMCI_LOG_LEVEL_LOW,"PPtP ETH UNI Configure ---- > ADD");
			 ethUni = (MIB_TABLE_ETHUNI_T*)pNewRow;
		}
		break;
		case MIB_SET:
		{			
			OMCI_LOG(OMCI_LOG_LEVEL_LOW,"PPtP ETH UNI Configure ---- > SET");
		}
		break;
		case MIB_DEL:
		{			
			OMCI_LOG(OMCI_LOG_LEVEL_LOW,"PPtP ETH UNI Configure ---- > DEL");
		}
		break;
		default:
		break;
	}
	return GOS_OK;
}


GOS_ERROR_CODE EthUni_Init(void)
{
    gMibEthUniTableInfo.Name = "EthUni";
    gMibEthUniTableInfo.Desc = "PPTP Ethernet UNI";
    gMibEthUniTableInfo.MaxEntry = (UINT32)(8);
    gMibEthUniTableInfo.ClassId = (UINT32)(11);
    gMibEthUniTableInfo.InitType = (UINT32)(PON_ME_INIT_TYPE_AUTO);
    gMibEthUniTableInfo.StdType = (UINT32)(PON_ME_STD_TYPE_STD);
    gMibEthUniTableInfo.ActionType = (UINT32)(PON_ME_ACTION_SET | PON_ME_ACTION_GET);
    gMibEthUniTableInfo.pAttributes = &(gMibEthUniAttrInfo[0]);


	gMibEthUniTableInfo.attrNum = MIB_TABLE_ETHUNI_ATTR_NUM;
	gMibEthUniTableInfo.entrySize = sizeof(MIB_TABLE_ETHUNI_T);
	gMibEthUniTableInfo.pDefaultRow = &gMibEthUniDefRow;


    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Name = "EntityID";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].Name = "ExpectedType";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].Name = "SensedType";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].Name = "AutoDectectCfg";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].Name = "EthLoopbackCfg";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Name = "AdminState";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Name = "OpState";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].Name = "DuplexInd";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].Name = "MaxFrameSize";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].Name = "DTEorDCEInd";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].Name = "PauseTime";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].Name = "BridgedorIPInd";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].Name = "ARC";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].Name = "ARCInterval";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].Name = "PppoeFilter";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].Name = "PowerControl";

    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Entity ID";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Expected type";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Sensed type";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Auto detection configuration";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Ethernet loopback configuration";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Administrative state";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Operational state";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Duplex Indication";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Max Frame Size";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "DTE or DCE Indication";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Pause Time";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Bridged or IP router";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Alarm Report Control";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "ARC Interval";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "PPPoE Filter";
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Power Control";

    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;

    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;

    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;

    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;

    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;

    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_HEX;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;

    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;

    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = TRUE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;

    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_EXPECTEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_SENSEDTYPE_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_AUTODECTECTCFG_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ETHLOOPBACKCFG_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_OPSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DUPLEXIND_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_MAXFRAMESIZE_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_DTEORDCEIND_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PAUSETIME_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_BRIDGEDORIPIND_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARC_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_ARCINTERVAL_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_PPPOEFILTER_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;
    gMibEthUniAttrInfo[MIB_TABLE_ETHUNI_POWERCONTROL_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;


    memset(&(gMibEthUniDefRow.EntityID), 0x00, sizeof(gMibEthUniDefRow.EntityID));
    memset(&(gMibEthUniDefRow.ExpectedType), 0x00, sizeof(gMibEthUniDefRow.ExpectedType));
    memset(&(gMibEthUniDefRow.SensedType), 0x00, sizeof(gMibEthUniDefRow.SensedType));
    memset(&(gMibEthUniDefRow.AutoDectectCfg), 0x00, sizeof(gMibEthUniDefRow.AutoDectectCfg));
    memset(&(gMibEthUniDefRow.EthLoopbackCfg), 0x00, sizeof(gMibEthUniDefRow.EthLoopbackCfg));
    memset(&(gMibEthUniDefRow.AdminState), 0x00, sizeof(gMibEthUniDefRow.AdminState));
    gMibEthUniDefRow.OpState = MIB_ATTR_DEF_SPACE;
    memset(&(gMibEthUniDefRow.DuplexInd), 0x00, sizeof(gMibEthUniDefRow.DuplexInd));
    gMibEthUniDefRow.MaxFrameSize = 1536;
    memset(&(gMibEthUniDefRow.DTEorDCEInd), 0x00, sizeof(gMibEthUniDefRow.DTEorDCEInd));
    memset(&(gMibEthUniDefRow.PauseTime), 0x00, sizeof(gMibEthUniDefRow.PauseTime));
    memset(&(gMibEthUniDefRow.BridgedorIPInd), 0x00, sizeof(gMibEthUniDefRow.BridgedorIPInd));
    memset(&(gMibEthUniDefRow.ARC), 0x00, sizeof(gMibEthUniDefRow.ARC));
    gMibEthUniDefRow.ARCInterval = 5;
    memset(&(gMibEthUniDefRow.PppoeFilter), 0x00, sizeof(gMibEthUniDefRow.PppoeFilter));
    memset(&(gMibEthUniDefRow.PowerControl), 0x00, sizeof(gMibEthUniDefRow.PowerControl));


	gMibEthUniOper.meOperDrvCfg = EthUniDrvCfg;
	gMibEthUniOper.meOperConnCheck = EthUniConnCheck;
	gMibEthUniOper.meOperDump = EthUniDumpMib;
	gMibEthUniOper.meOperConnCfg = NULL;

	MIB_Register(MIB_TABLE_ETHUNI_INDEX,&gMibEthUniTableInfo,&gMibEthUniOper);

    return GOS_OK;
}


