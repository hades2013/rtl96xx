/*
 * Copyright (C) 2012 Realtek Semiconductor Corp. 
 * All Rights Reserved.
 *
 * This program is the proprietary software of Realtek Semiconductor
 * Corporation and/or its licensors, and only be used, duplicated, 
 * modified or distributed under the authorized license from Realtek. 
 *
 * ANY USE OF THE SOFTWARE OTHER THAN AS AUTHORIZED UNDER 
 * THIS LICENSE OR COPYRIGHT LAW IS PROHIBITED. 
 *
 */


#include "app_basic.h"
#include "omci_defs.h"

MIB_TABLE_INFO_T gMibMcastSubConfInfoTableInfo;
MIB_ATTR_INFO_T  gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ATTR_NUM];
MIB_TABLE_MCASTSUBCONFINFO_T gMibMcastSubConfInfoDefRow;
MIB_TABLE_OPER_T gMibMcastSubConfInfoOper;


GOS_ERROR_CODE McastSubConfInfoDumpMib(void *pData)
{
	MIB_TABLE_MCASTSUBCONFINFO_T *pMcastSubConfInfo = (MIB_TABLE_MCASTSUBCONFINFO_T*)pData;
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"%s", "McastSubConfInfo");

	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"EntityId: 0x%02x", pMcastSubConfInfo->EntityId);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"MeType: %d", pMcastSubConfInfo->MeType);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"McastOperProfPtr: 0x%02x", pMcastSubConfInfo->McastOperProfPtr);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"MaxSimGroups: %d", pMcastSubConfInfo->MaxSimGroups);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"MaxMcastBandwidth: %d", pMcastSubConfInfo->MaxMcastBandwidth);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"BandwidthEnforcement: %d", pMcastSubConfInfo->BandwidthEnforcement);

	return GOS_OK;
}

GOS_ERROR_CODE McastSubConfInfoDrvCfg(MIB_TABLE_INDEX tableIdx, void* pOldRow, void* pNewRow, MIB_OPERA_TYPE operationType)
{
	OMCI_LOG(OMCI_LOG_LEVEL_LOW,"%s: process end\n", __FUNCTION__);
	return GOS_OK;
}

GOS_ERROR_CODE McastSubConfInfo_Init(void)
{
    gMibMcastSubConfInfoTableInfo.Name = "McastSubConfInfo";
    gMibMcastSubConfInfoTableInfo.Desc = "Multicast subscriber configure inforation";
    gMibMcastSubConfInfoTableInfo.MaxEntry = (UINT32)(32);
    gMibMcastSubConfInfoTableInfo.ClassId = (UINT32)(310);
    gMibMcastSubConfInfoTableInfo.InitType = (UINT32)(PON_ME_INIT_TYPE_BY_OLT);
    gMibMcastSubConfInfoTableInfo.StdType = (UINT32)(PON_ME_STD_TYPE_STD);
    gMibMcastSubConfInfoTableInfo.ActionType = (UINT32)(PON_ME_ACTION_CREATE | PON_ME_ACTION_DELETE | PON_ME_ACTION_SET | PON_ME_ACTION_GET);
    gMibMcastSubConfInfoTableInfo.pAttributes = &(gMibMcastSubConfInfoAttrInfo[0]);

	gMibMcastSubConfInfoTableInfo.attrNum = MIB_TABLE_MCASTSUBCONFINFO_ATTR_NUM;
	gMibMcastSubConfInfoTableInfo.entrySize = sizeof(MIB_TABLE_MCASTSUBCONFINFO_T);
	gMibMcastSubConfInfoTableInfo.pDefaultRow = &gMibMcastSubConfInfoDefRow;

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Name = "EntityId";
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].Name = "MeType";
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].Name = "McastOperProfPtr";
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].Name = "MaxSimGroups";
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].Name = "MaxMcastBandwidth";
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].Name = "BandwidthEnforcement";

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Entity ID";
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "ME Type";
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Multicast operation profile pointer";
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Max simultaneous groups";
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Max multicast bandwidth";
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Bandwidth enforcement";

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT32;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].Len = 4;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = TRUE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_HEX;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_HEX;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;

    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_METYPE_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MCASTOPERPROFPTR_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXSIMGROUPS_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_MAXMCASTBANDWIDTH_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;
    gMibMcastSubConfInfoAttrInfo[MIB_TABLE_MCASTSUBCONFINFO_BANDWIDTHENFORCEMENT_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;

    memset(&(gMibMcastSubConfInfoDefRow.EntityId), 0x00, sizeof(gMibMcastSubConfInfoDefRow.EntityId));
    memset(&(gMibMcastSubConfInfoDefRow.MeType), 0x00, sizeof(gMibMcastSubConfInfoDefRow.MeType));
    memset(&(gMibMcastSubConfInfoDefRow.McastOperProfPtr), 0x00, sizeof(gMibMcastSubConfInfoDefRow.McastOperProfPtr));
    memset(&(gMibMcastSubConfInfoDefRow.MaxSimGroups), 0x00, sizeof(gMibMcastSubConfInfoDefRow.MaxSimGroups));
    memset(&(gMibMcastSubConfInfoDefRow.MaxMcastBandwidth), 0x00, sizeof(gMibMcastSubConfInfoDefRow.MaxMcastBandwidth));
    memset(&(gMibMcastSubConfInfoDefRow.BandwidthEnforcement), 0x00, sizeof(gMibMcastSubConfInfoDefRow.BandwidthEnforcement));

    gMibMcastSubConfInfoOper.meOperDrvCfg = McastSubConfInfoDrvCfg;
    gMibMcastSubConfInfoOper.meOperConnCheck = NULL;
    gMibMcastSubConfInfoOper.meOperDump = McastSubConfInfoDumpMib;
	gMibMcastSubConfInfoOper.meOperConnCfg = NULL;

    MIB_Register(MIB_TABLE_MCASTSUBCONFINFO_INDEX, &gMibMcastSubConfInfoTableInfo, &gMibMcastSubConfInfoOper);

    return GOS_OK;
}

