/*
 * Copyright (C) 2012 Realtek Semiconductor Corp. 
 * All Rights Reserved.
 *
 * This program is the proprietary software of Realtek Semiconductor
 * Corporation and/or its licensors, and only be used, duplicated, 
 * modified or distributed under the authorized license from Realtek. 
 *
 * ANY USE OF THE SOFTWARE OTHER THAN AS AUTHORIZED UNDER 
 * THIS LICENSE OR COPYRIGHT LAW IS PROHIBITED. 
 *
 */


#include "app_basic.h"
#include "omci_defs.h"


MIB_TABLE_INFO_T gMibMacBriServProfTableInfo;
MIB_ATTR_INFO_T  gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATTR_NUM];
MIB_TABLE_MACBRISERVPROF_T gMibMacBriServProfDefRow;
MIB_TABLE_OPER_T		   gMibMacBriServProfOper;




GOS_ERROR_CODE MacBriServProfDumpMib(void *pData)
{
	MIB_TABLE_MACBRISERVPROF_T *pServProf = (MIB_TABLE_MACBRISERVPROF_T*)pData;

	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"MacBridgeServProf");
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"EntityId: %02x",pServProf->EntityID);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"AtmBriInd: %d",pServProf->AtmBriInd);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"DiscardUnknow: %d",pServProf->DiscardUnknow);	
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"ForwardDelay: %d",pServProf->ForwardDelay);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"HellowTime: %d",pServProf->HelloTime);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"LearningInd: %d",pServProf->LearningInd);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"MacLearningDepth: %d",pServProf->MacLearningDepth);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"MaxAge: %d",pServProf->MaxAge);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"Priority: %d",pServProf->Priority);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"SpanTreeInd: %d",pServProf->SpanTreeInd);

	return GOS_OK;
}




GOS_ERROR_CODE MacBriServProfDrvCfg(void* pOldRow,void* pNewRow,MIB_OPERA_TYPE  operationType)
{
	OMCI_LOG(OMCI_LOG_LEVEL_LOW,"%s: process end\n", __FUNCTION__);
	return GOS_OK;
}

GOS_ERROR_CODE MacBriServProfConnCfg(void* pOldRow,void* pNewRow,MIB_OPERA_TYPE  operationType)
{
	MIB_TABLE_MACBRISERVPROF_T* pBridge;
	MIB_TREE_T *pTree;


	switch (operationType){
	case MIB_ADD:
	{
		OMCI_LOG(OMCI_LOG_LEVEL_LOW,"Bridge Service Profile ----> ADD");
		/*check if new connection is complete*/
		pBridge = (MIB_TABLE_MACBRISERVPROF_T *)pNewRow;
		OMCI_LOG(OMCI_LOG_LEVEL_LOW,"bridge id %d", pBridge->EntityID);
		pTree = MIB_AvlTreeCreate(pBridge);

		if(pTree==NULL)
		{
			OMCI_LOG(OMCI_LOG_LEVEL_LOW,"Create Bridge Tree faild");
			return GOS_FAIL;
		}
		MIB_TreeConnUpdate(pTree);
	break;
	}
	case MIB_SET:
	{
		OMCI_LOG(OMCI_LOG_LEVEL_LOW,"Bridge Service Profile ----> SET");
		/*check if new connection is complete*/
		pBridge = (MIB_TABLE_MACBRISERVPROF_T *)pNewRow;
		OMCI_LOG(OMCI_LOG_LEVEL_LOW,"bridge id %d", pBridge->EntityID);
		pTree = MIB_AvlTreeSearchByKey(pBridge->EntityID,AVL_KEY_MACBRISERVPROF);
		if(pTree==NULL)
		{
			OMCI_LOG(OMCI_LOG_LEVEL_LOW,"Can't find Root Tree");
			return GOS_FAIL;
		}
		MIB_TreeConnUpdate(pTree);
	break;
	}
	case MIB_DEL:
	{
		OMCI_LOG(OMCI_LOG_LEVEL_LOW,"Bridge Service Profile ---- > DEL");
		/*check if new connection is complete*/
		pBridge = (MIB_TABLE_MACBRISERVPROF_T *)pOldRow;
		OMCI_LOG(OMCI_LOG_LEVEL_LOW,"bridge id %d", pBridge->EntityID);
		pTree = MIB_AvlTreeSearchByKey(pBridge->EntityID,AVL_KEY_MACBRISERVPROF);
		if(pTree==NULL)
		{
			OMCI_LOG(OMCI_LOG_LEVEL_LOW,"Search Old Bridge Tree faild");
		return GOS_FAIL;
		}

		/*remove tree*/
		MIB_AvlTreeRemove(pTree);
	break;
	}
	default:
	return GOS_OK;
	}


	return GOS_OK;
}


GOS_ERROR_CODE MacBriServProf_Init(void)
{
	gMibMacBriServProfTableInfo.Name = "MacBriServProf";
	gMibMacBriServProfTableInfo.Desc = "MAC Bridge Service Profile";
    	gMibMacBriServProfTableInfo.MaxEntry = (UINT32)(12);
    	gMibMacBriServProfTableInfo.ClassId = (UINT32)(45);
    	gMibMacBriServProfTableInfo.InitType = (UINT32)(PON_ME_INIT_TYPE_BY_OLT);
    	gMibMacBriServProfTableInfo.StdType = (UINT32)(PON_ME_STD_TYPE_STD);
    	gMibMacBriServProfTableInfo.ActionType = (UINT32)(PON_ME_ACTION_CREATE | PON_ME_ACTION_DELETE | PON_ME_ACTION_SET | PON_ME_ACTION_GET);
    	gMibMacBriServProfTableInfo.pAttributes = &(gMibMacBriServProfAttrInfo[0]);


	gMibMacBriServProfTableInfo.attrNum = MIB_TABLE_MACBRISERVPROF_ATTR_NUM;
	gMibMacBriServProfTableInfo.entrySize = sizeof(MIB_TABLE_MACBRISERVPROF_T);
	gMibMacBriServProfTableInfo.pDefaultRow = &gMibMacBriServProfDefRow;


    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Name = "EntityID";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].Name = "SpanTreeInd";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].Name = "LearningInd";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].Name = "AtmBriInd";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].Name = "Priority";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].Name = "MaxAge";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].Name = "HelloTime";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].Name = "ForwardDelay";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].Name = "DiscardUnknow";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].Name = "MacLearningDepth";

    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Entity ID";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "SpanningTreeInd";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Learning Indication";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "ATMPortBridgingInd";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Priority";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "MaxAge";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "HelloTime";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "ForwardDelay";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "DiscardUnknow";
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "MacLearningDepth";

    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;

    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;

    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = TRUE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;

    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;

    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;

    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_HEX;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;

    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_SET_BY_CREATE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE | PON_ME_OLT_SET_BY_CREATE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE | PON_ME_OLT_SET_BY_CREATE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE | PON_ME_OLT_SET_BY_CREATE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE | PON_ME_OLT_SET_BY_CREATE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE | PON_ME_OLT_SET_BY_CREATE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE | PON_ME_OLT_SET_BY_CREATE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE | PON_ME_OLT_SET_BY_CREATE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE | PON_ME_OLT_SET_BY_CREATE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE | PON_ME_OLT_SET_BY_CREATE;

    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;

    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_SPANTREEIND_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_LEARNINGIND_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_ATMBRIIND_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_PRIORITY_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MAXAGE_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_HELLOTIME_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_FORWARDDELAY_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_DISCARDUNKNOW_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibMacBriServProfAttrInfo[MIB_TABLE_MACBRISERVPROF_MACLEARNINGDEPTH_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;


    memset(&(gMibMacBriServProfDefRow.EntityID), 0x00, sizeof(gMibMacBriServProfDefRow.EntityID));
    memset(&(gMibMacBriServProfDefRow.SpanTreeInd), 0x00, sizeof(gMibMacBriServProfDefRow.SpanTreeInd));
    memset(&(gMibMacBriServProfDefRow.LearningInd), 0x00, sizeof(gMibMacBriServProfDefRow.LearningInd));
    memset(&(gMibMacBriServProfDefRow.AtmBriInd), 0x00, sizeof(gMibMacBriServProfDefRow.AtmBriInd));
    memset(&(gMibMacBriServProfDefRow.Priority), 0x00, sizeof(gMibMacBriServProfDefRow.Priority));
    memset(&(gMibMacBriServProfDefRow.MaxAge), 0x00, sizeof(gMibMacBriServProfDefRow.MaxAge));
    memset(&(gMibMacBriServProfDefRow.HelloTime), 0x00, sizeof(gMibMacBriServProfDefRow.HelloTime));
    memset(&(gMibMacBriServProfDefRow.ForwardDelay), 0x00, sizeof(gMibMacBriServProfDefRow.ForwardDelay));
    memset(&(gMibMacBriServProfDefRow.DiscardUnknow), 0x00, sizeof(gMibMacBriServProfDefRow.DiscardUnknow));
    memset(&(gMibMacBriServProfDefRow.MacLearningDepth), 0x00, sizeof(gMibMacBriServProfDefRow.MacLearningDepth));


	gMibMacBriServProfOper.meOperDrvCfg = MacBriServProfDrvCfg;
	gMibMacBriServProfOper.meOperConnCheck = NULL;
	gMibMacBriServProfOper.meOperDump = MacBriServProfDumpMib;
	gMibMacBriServProfOper.meOperConnCfg = MacBriServProfConnCfg;

	MIB_Register(MIB_TABLE_MACBRISERVPROF_INDEX,&gMibMacBriServProfTableInfo,&gMibMacBriServProfOper);

    return GOS_OK;
}



