/*
 * Copyright (C) 2012 Realtek Semiconductor Corp. 
 * All Rights Reserved.
 *
 * This program is the proprietary software of Realtek Semiconductor
 * Corporation and/or its licensors, and only be used, duplicated, 
 * modified or distributed under the authorized license from Realtek. 
 *
 * ANY USE OF THE SOFTWARE OTHER THAN AS AUTHORIZED UNDER 
 * THIS LICENSE OR COPYRIGHT LAW IS PROHIBITED. 
 *
 */


#include "app_basic.h"
#include "omci_defs.h"

MIB_TABLE_INFO_T gMibVEIPTableInfo;
MIB_ATTR_INFO_T  gMibVEIPAttrInfo[MIB_TABLE_VEIP_ATTR_NUM];
MIB_TABLE_VEIP_T gMibVEIPDefRow;
MIB_TABLE_OPER_T gMibVEIPOper;


GOS_ERROR_CODE VEIPDumpMib(void *pData)
{
	MIB_TABLE_VEIP_T *pVEIP = (MIB_TABLE_VEIP_T*)pData;
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"%s", "VEIP");

	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"EntityId: 0x%02x", pVEIP->EntityId);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"AdminState: %d", pVEIP->AdminState);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"OperState: %d", pVEIP->OperState);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"InterDomainName: %s", pVEIP->InterDomainName);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"TcpUdpPtr: 0x%02x", pVEIP->TcpUdpPtr);
	OMCI_LOG(OMCI_LOG_LEVEL_HIGH,"IansAssignPort: %d", pVEIP->IansAssignPort);

	return GOS_OK;
}

GOS_ERROR_CODE VEIPDrvCfg(MIB_TABLE_INDEX tableIdx, void* pOldRow, void* pNewRow, MIB_OPERA_TYPE operationType)
{
	OMCI_LOG(OMCI_LOG_LEVEL_LOW,"%s: process end\n", __FUNCTION__);
	return GOS_OK;
}

GOS_ERROR_CODE VEIP_Init(void)
{
    gMibVEIPTableInfo.Name = "VEIP";
    gMibVEIPTableInfo.Desc = "Virtual Ethernet interface point";
    gMibVEIPTableInfo.MaxEntry = (UINT32)(4);
    gMibVEIPTableInfo.ClassId = (UINT32)(329);
    gMibVEIPTableInfo.InitType = (UINT32)(PON_ME_INIT_TYPE_AUTO);
    gMibVEIPTableInfo.StdType = (UINT32)(PON_ME_STD_TYPE_STD);
    gMibVEIPTableInfo.ActionType = (UINT32)(PON_ME_ACTION_SET | PON_ME_ACTION_GET);
    gMibVEIPTableInfo.pAttributes = &(gMibVEIPAttrInfo[0]);

	gMibVEIPTableInfo.attrNum = MIB_TABLE_VEIP_ATTR_NUM;
	gMibVEIPTableInfo.entrySize = sizeof(MIB_TABLE_VEIP_T);
	gMibVEIPTableInfo.pDefaultRow = &gMibVEIPDefRow;

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Name = "EntityId";
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Name = "AdminState";
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Name = "OperState";
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].Name = "InterDomainName";
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].Name = "TcpUdpPtr";
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].Name = "IansAssignPort";

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Entity ID";
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Administrative state";
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Operational state";
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "Inter-domain name";
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "TCP / UDP pointer";
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].Desc = "IANA assigned port";

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT8;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_STR;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].DataType = MIB_ATTR_TYPE_UINT16;

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].Len = 1;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].Len = 25;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].Len = 2;

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = TRUE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].IsIndex = FALSE;

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_READ_ONLY;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].UsrAcc = MIB_ATTR_USR_WRITE;

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].MibSave = TRUE;

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_HEX;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_CHAR;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_HEX;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].OutStyle = MIB_ATTR_OUT_DEC;

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ | PON_ME_OLT_WRITE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].OltAcc = PON_ME_OLT_READ;

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = TRUE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].AvcFlag = FALSE;

    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ENTITYID_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_ADMINSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_OPERSTATE_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_INTERDOMAINNAME_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_TCPUDPPTR_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_OPT_SUPPORT;
    gMibVEIPAttrInfo[MIB_TABLE_VEIP_IANSASSIGNPORT_INDEX - MIB_TABLE_FIRST_INDEX].OptionType = PON_ME_ATTR_MANDATORY;

    memset(&(gMibVEIPDefRow.EntityId), 0x00, sizeof(gMibVEIPDefRow.EntityId));
    memset(&(gMibVEIPDefRow.AdminState), 0x00, sizeof(gMibVEIPDefRow.AdminState));
    memset(&(gMibVEIPDefRow.OperState), 0x00, sizeof(gMibVEIPDefRow.OperState));
    strncpy(&(gMibVEIPDefRow.InterDomainName), "0", sizeof(gMibVEIPDefRow.InterDomainName));
    memset(&(gMibVEIPDefRow.TcpUdpPtr), 0x00, sizeof(gMibVEIPDefRow.TcpUdpPtr));
    memset(&(gMibVEIPDefRow.IansAssignPort), 0x00, sizeof(gMibVEIPDefRow.IansAssignPort));

    gMibVEIPOper.meOperDrvCfg = VEIPDrvCfg;
    gMibVEIPOper.meOperConnCheck = NULL;
    gMibVEIPOper.meOperDump = VEIPDumpMib;
	gMibVEIPOper.meOperConnCfg = NULL;

    MIB_Register(MIB_TABLE_VEIP_INDEX, &gMibVEIPTableInfo, &gMibVEIPOper);

    return GOS_OK;
}

